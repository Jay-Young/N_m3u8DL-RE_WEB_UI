var p=(c,r,t)=>new Promise((s,n)=>{var e=o=>{try{a(t.next(o))}catch(i){n(i)}},l=o=>{try{a(t.throw(o))}catch(i){n(i)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(e,l);a((t=t.apply(c,r)).next())});import{u as f}from"./form-CsoABLlO.js";import{s as h,j as g}from"./bootstrap-DwGBItLZ.js";import{a as b,g as w}from"./index-DJ4-Xmui.js";import{C as N}from"./index-Df3NT8QL.js";import{_ as P}from"./page.vue_vue_type_script_setup_true_lang-DtCkKZsF.js";import{V as _,ak as F,ac as V,ad as d,S as m,ab as k,n as u}from"../jse/index-index-CQKoeuSr.js";const q=_({__name:"add",setup(c){const[r,t]=f({commonConfig:{componentProps:{class:"w-full"}},handleSubmit:s,layout:"horizontal",schema:[{component:"Input",componentProps:{placeholder:"请输入下载链接"},fieldName:"url",label:"下载链接",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入保存文件名"},fieldName:"title",label:"文件名",rules:"required"},{component:"Input",componentProps:{placeholder:"请输入"},fieldName:"saveFilePaths",defaultValue:"/download",label:"保存目录",rules:h().default("默认值").optional()},{component:"Switch",defaultValue:!1,fieldName:"setmore",componentProps:{class:"w-auto"},help:"打开可以配置更多下载信息",label:"设置更多"},{component:"Input",dependencies:{if(e){return!!e.setmore},triggerFields:["setmore"]},componentProps:{placeholder:"请输入token"},help:"默认获取预设token",fieldName:"token",label:"token"},{component:"InputNumber",componentProps:{placeholder:"请输入下载并发线程数量"},dependencies:{if(e){return!!e.setmore},triggerFields:["setmore"]},help:"下载并发线程数量,默认运行主机CPU线程数",defaultValue:12,fieldName:"threadCountss",label:"下载线程"},{component:"InputNumber",componentProps:{placeholder:"请输入下载出错时重试次数"},dependencies:{if(e){return!!e.setmore},triggerFields:["setmore"]},help:"下载错误时重试次数,默认5次",fieldName:"retrycounts",defaultValue:5,label:"出错重试"},{component:"Switch",defaultValue:!0,fieldName:"setbinaryMeMrges",componentProps:{class:"w-auto"},dependencies:{if(e){return!!e.setmore},triggerFields:["setmore"]},label:"二进制合并"},{component:"Switch",defaultValue:!0,fieldName:"setdecryptions",dependencies:{if(e){return!!e.setmore},triggerFields:["setmore"]},componentProps:{class:"w-auto"},label:"实时解密分片"}],wrapperClass:"grid-cols-1"});function s(e){return p(this,null,function*(){JSON.stringify(e);const{code:l,data:a,msg:o}=yield b(e);l===0&&(g.success({content:`${o}`}),console.log(a))})}function n(){return p(this,null,function*(){const e=yield w();t.setFieldValue("token",e.apiToken),t.setFieldValue("saveFilePaths",e.saveFile)})}return F(()=>{n()}),(e,l)=>(k(),V(m(P),null,{default:d(()=>[u(m(N),{title:"新建下载任务"},{default:d(()=>[u(m(r))]),_:1})]),_:1}))}});export{q as default};
