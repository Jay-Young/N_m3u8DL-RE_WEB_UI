var T=(d,l,a)=>new Promise((c,t)=>{var u=n=>{try{m(a.next(n))}catch(r){t(r)}},b=n=>{try{m(a.throw(n))}catch(r){t(r)}},m=n=>n.done?c(n.value):Promise.resolve(n.value).then(u,b);m((a=a.apply(d,l)).next())});import{u as w,c as N,$ as e,T as V,e as k,s as B}from"./bootstrap-CpxkWKvn.js";import{V as C,O as v,J as S,ak as $,aq as x,n as f,am as p,at as y,an as _,aw as h,az as g,S as s,b0 as L,X as P,al as q}from"../jse/index-index-CVIFWVqB.js";const z={class:"text-muted-foreground"},A=C({name:"AuthenticationCodeLogin",__name:"code-login",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(d,{emit:l}){const a=d,c=l,t=w(),[u,{validate:b,getValues:m}]=N(v({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:S(()=>a.formSchema),showDefaultActions:!1}));function n(){return T(this,null,function*(){const{valid:o}=yield b(),i=yield m();o&&c("submit",{code:i==null?void 0:i.code,phoneNumber:i==null?void 0:i.phoneNumber})})}function r(){t.push(a.loginPath)}return(o,i)=>($(),x("div",null,[f(V,null,{desc:p(()=>[y("span",z,[_(o.$slots,"subTitle",{},()=>[h(g(o.subTitle||s(e)("authentication.codeSubtitle")),1)])])]),default:p(()=>[_(o.$slots,"title",{},()=>[h(g(o.title||s(e)("authentication.welcomeBack"))+" ðŸ“² ",1)])]),_:3}),f(s(u)),f(s(k),{class:L([{"cursor-wait":o.loading},"w-full"]),loading:o.loading,onClick:n},{default:p(()=>[_(o.$slots,"submitButtonText",{},()=>[h(g(o.submitButtonText||s(e)("common.login")),1)])]),_:3},8,["class","loading"]),f(s(k),{class:"mt-4 w-full",variant:"outline",onClick:i[0]||(i[0]=D=>r())},{default:p(()=>[h(g(s(e)("common.back")),1)]),_:1})]))}}),R=C({name:"CodeLogin",__name:"code-login",setup(d){const l=P(!1),a=S(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.mobile")},fieldName:"phoneNumber",label:e("authentication.mobile"),rules:B().min(1,{message:e("authentication.mobileTip")}).refine(t=>/^\d{11}$/.test(t),{message:e("authentication.mobileErrortip")})},{component:"VbenPinInput",componentProps:{createText:t=>t>0?e("authentication.sendText",[t]):e("authentication.sendCode"),placeholder:e("authentication.code")},fieldName:"code",label:e("authentication.code"),rules:B().min(1,{message:e("authentication.codeTip")})}]);function c(t){return T(this,null,function*(){console.log(t)})}return(t,u)=>($(),q(s(A),{"form-schema":a.value,loading:l.value,onSubmit:c},null,8,["form-schema","loading"]))}});export{R as default};
