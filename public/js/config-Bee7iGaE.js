var s=(c,p,e)=>new Promise((l,t)=>{var o=a=>{try{m(e.next(a))}catch(r){t(r)}},n=a=>{try{m(e.throw(a))}catch(r){t(r)}},m=a=>a.done?l(a.value):Promise.resolve(a.value).then(o,n);m((e=e.apply(c,p)).next())});import{u as f}from"./form-D9PPsS0B.js";import{j as h}from"./bootstrap-HQD1Fffr.js";import{g as N,e as _}from"./index-M5kBiO2L.js";import{C as g}from"./index-BsUOrAej.js";import{_ as D}from"./page.vue_vue_type_script_setup_true_lang-BM5S-37n.js";import{V as b,ac as F,X as P,al as V,am as u,S as i,ak as R,n as d}from"../jse/index-index-lUs0GHEt.js";const M=b({__name:"config",setup(c){const[p,e]=f({commonConfig:{componentProps:{class:"w-full"}},handleSubmit:t,layout:"horizontal",schema:[{component:"Input",componentProps:{placeholder:"请输入express使用端口号"},help:"服务端口号,只能是数字,慎重修改！！若修改后无法访问，请检查config.json和_app.config.js，docker检查映射端口",fieldName:"port",label:"API端口号"},{component:"Input",componentProps:{placeholder:"请输入token"},help:"权限验证，避免非法访问api",fieldName:"apiToken",label:"token"},{component:"Input",componentProps:{placeholder:"请输入并发下载量"},help:"并发下载任务数量",fieldName:"threadCounts",label:"并发下载量"},{component:"Input",componentProps:{placeholder:"请输入文件保存目录"},help:"文件保存目录绝对路径，默认值：/app/download",fieldName:"saveFile",label:"保存目录"},{component:"Input",componentProps:{placeholder:"请输入缓存目录"},help:"下载缓存目录绝对路径，默认值：/app/download/temp",fieldName:"tempDir",label:"缓存目录"},{component:"Input",componentProps:{placeholder:"请输入N_m3u8DL-RE并发下载线程数"},help:"N_m3u8DL-RE并发下载线程数",fieldName:"threadCount",label:"下载线程"},{component:"Input",componentProps:{placeholder:"请输入下载错误重试次数"},help:"N_m3u8DL-RE下载错误重试次数",fieldName:"retrycount",label:"重试次数"},{component:"Input",componentProps:{placeholder:"请输入ffmpeg执行绝对路径"},help:"ffmpeg执行路径,如果设置了环境变量,可留空，默认值：/app/plugin/ffmpeg/ffmpeg",fieldName:"ffmpegPath",label:"ffmpeg"},{component:"Input",componentProps:{placeholder:"请输入N_m3u8DL-RE执行绝对路径"},help:"N_m3u8DL-RE执行绝对路径,如果设置了环境变量,可留空，默认值：/app/plugin/N_m3u8DL-RE/N_m3u8DL-RE",fieldName:"Nm3u8DLRE",label:"Nm3u8DLRE"},{component:"Switch",defaultValue:!0,fieldName:"setbinaryMeMrges",help:"N_m3u8DL-RE-是否开启二进制合并",componentProps:{class:"w-auto"},label:"二进制合并"},{component:"Switch",defaultValue:!0,fieldName:"setdecryptions",help:"N_m3u8DL-RE-是否开启实时解密分片",componentProps:{class:"w-auto"},label:"实时解密分片"}],wrapperClass:"grid-cols-1"});function l(){return s(this,null,function*(){const o=yield N();e.setFieldValue("port",o.port),e.setFieldValue("apiToken",o.apiToken),e.setFieldValue("binaryMeMrge",o.binaryMeMrge),e.setFieldValue("ffmpegPath",o.ffmpegPath),e.setFieldValue("mp4RealTimeDecryption",o.mp4RealTimeDecryption),e.setFieldValue("retrycount",o.retrycount),e.setFieldValue("saveFile",o.saveFile),e.setFieldValue("tempDir",o.tempDir),e.setFieldValue("threadCount",o.threadCount),e.setFieldValue("threadCounts",o.threadCounts),e.setFieldValue("Nm3u8DLRE",o.Nm3u8DLRE)})}F(()=>{l()});function t(o){return s(this,null,function*(){(yield _(o)).code===0&&h.success({content:"修改成功,程序重启后生效!"})})}return P("1"),(o,n)=>(R(),V(i(D),null,{default:u(()=>[d(i(g),{title:"全局配置"},{default:u(()=>[d(i(p))]),_:1})]),_:1}))}});export{M as default};
