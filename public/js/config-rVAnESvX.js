var m=(i,l,e)=>new Promise((n,a)=>{var o=t=>{try{r(e.next(t))}catch(s){a(s)}},p=t=>{try{r(e.throw(t))}catch(s){a(s)}},r=t=>t.done?n(t.value):Promise.resolve(t.value).then(o,p);r((e=e.apply(i,l)).next())});import{u as f}from"./form-weeuivWV.js";import{i as h}from"./bootstrap-lHTY6Y-e.js";import{g as b,e as _}from"./index-CVNh7lX4.js";import{C as g}from"./index-C0B7FKrt.js";import{_ as N}from"./page.vue_vue_type_script_setup_true_lang-4WYL5wM9.js";import{V as F,ak as P,X as V,ac as C,ad as u,S as c,ab as w,n as d}from"../jse/index-index-j8hGa-Ht.js";const x=F({__name:"config",setup(i){const[l,e]=f({commonConfig:{componentProps:{class:"w-full"}},handleSubmit:a,layout:"horizontal",schema:[{component:"Input",componentProps:{placeholder:"请输入express使用端口号"},help:"express使用的端口号,只能是数字",fieldName:"port",label:"API端口号"},{component:"Input",componentProps:{placeholder:"请输入WebSocket端口号"},help:"WebSocket服务使用的端口号,只能是数字",fieldName:"wsport",label:"ws端口"},{component:"Input",componentProps:{placeholder:"请输入并发下载量"},help:"并发下载任务数量",fieldName:"threadCounts",label:"并发下载量"},{component:"Input",componentProps:{placeholder:"请输入文件保存目录"},help:"文件保存目录绝对路径",fieldName:"saveFile",label:"保存目录"},{component:"Input",componentProps:{placeholder:"请输入缓存目录"},help:"下载缓存目录绝对路径",fieldName:"tempDir",label:"缓存目录"},{component:"Input",componentProps:{placeholder:"请输入N_m3u8DL-RE并发下载线程数"},help:"N_m3u8DL-RE并发下载线程数",fieldName:"threadCount",label:"下载线程"},{component:"Input",componentProps:{placeholder:"请输入下载错误重试次数"},help:"N_m3u8DL-RE下载错误重试次数",fieldName:"retrycount",label:"重试次数"},{component:"Input",componentProps:{placeholder:"请输入ffmpeg执行绝对路径"},help:"ffmpeg执行路径,如果设置了环境变量,可留空",fieldName:"ffmpegPath",label:"ffmpeg"},{component:"Switch",defaultValue:!0,fieldName:"setbinaryMeMrges",help:"N_m3u8DL-RE-是否开启二进制合并",componentProps:{class:"w-auto"},label:"二进制合并"},{component:"Switch",defaultValue:!0,fieldName:"setdecryptions",help:"N_m3u8DL-RE-是否开启实时解密分片",componentProps:{class:"w-auto"},label:"实时解密分片"}],wrapperClass:"grid-cols-1"});function n(){return m(this,null,function*(){const o=yield b();e.setFieldValue("port",o.port),e.setFieldValue("wsport",o.wsport),e.setFieldValue("binaryMeMrge",o.binaryMeMrge),e.setFieldValue("ffmpegPath",o.ffmpegPath),e.setFieldValue("mp4RealTimeDecryption",o.mp4RealTimeDecryption),e.setFieldValue("retrycount",o.retrycount),e.setFieldValue("saveFile",o.saveFile),e.setFieldValue("tempDir",o.tempDir),e.setFieldValue("threadCount",o.threadCount),e.setFieldValue("threadCounts",o.threadCounts)})}P(()=>{n()});function a(o){return m(this,null,function*(){(yield _(o)).code===0&&h.success({content:"修改成功,程序重启后生效!"})})}return V("1"),(o,p)=>(w(),C(c(N),null,{default:u(()=>[d(c(g),{title:"全局配置"},{default:u(()=>[d(c(l))]),_:1})]),_:1}))}});export{x as default};
